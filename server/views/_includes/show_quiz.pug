//- show a quiz, including showing the current grade
//- should be passed a block to deal with the differences in how the last
//- question is treated in the admin screen vs. the quiz screen
//- (since the last question has not been answered yet, it should be
//- treated differently)
mixin showQuiz
  #quiz.container
    if quiz
      - 
        var theGradeClass 
          = common.gradeClass(
            quiz.questionsCorrect, quiz.questionsAnswered);
      div(class='grade ' + theGradeClass)
        span.questionsCorrect= quiz.questionsCorrect
        span.questionsAnswered= quiz.questionsAnswered
        - 
          var theGradePercentStr
            = common.gradePercentStr(
              quiz.questionsAnswered, quiz.questionsCorrect);
        span.gradePercent= theGradePercentStr
      - var questions = quiz.questions
      //- prevent problems with undefined questions
      if questions
        ol.questions
          - for (var i = 0; i <= questions.length - 2; i++)
            - var question = questions[i]
            - 
              var isCorrectClass 
                = question.answerCorrect === question.answerGiven 
                ? "correct" : "incorrect"
            li(class='question ' + isCorrectClass)
              span.number= i + 1
              span.asktime= common.printDate(question.askTime)
              span.lhs= question.number1
              span.rhs= question.number2
              span.answerGiven= question.answerGiven
              span.answerCorrect= question.answerCorrect
          //- last question
          - var question = questions[questions.length - 1]
          li.question.last-question
            span.number= i + 1
            span.asktime= common.printDate(question.askTime)
            span.lhs= question.number1
            span.rhs= question.number2
            block
      else
        div.quiz-noquestions No questions found