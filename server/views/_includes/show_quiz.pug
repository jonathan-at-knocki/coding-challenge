//- show a quiz, including showing the current grade
//- should be passed a block to deal with the differences in how the last
//- question is treated in the admin screen vs. the quiz screen
//- (since the last question has not been answered yet, it should be
//- treated differently)
mixin showQuiz
  #quiz.container
    if quiz
      - 
        var theGradeClass 
          = common.gradeClass(
            quiz.questionsCorrect, quiz.questionsAnswered);
      div(class='grade ' + theGradeClass)
        span.questionsCorrect= quiz.questionsCorrect
        span.questionsAnswered= quiz.questionsAnswered
        - 
          var theGradePercentStr
            = common.gradePercentStr(
              quiz.questionsAnswered, quiz.questionsCorrect);
        span.gradePercent= theGradePercentStr
      - var questions = quiz.questions
      //- prevent problems with undefined questions
      if questions
        table.questions
          //- header
          tr.header
            th.number #
            th.asktime time asked
            th.numbers problem
            th.answerGiven given 
            th.answerCorrect correct
          - for (var i = 0; i <= questions.length - 2; i++)
            - var question = questions[i]
            - 
              var isCorrectClass 
                = question.answerCorrect === question.answerGiven 
                ? "correct" : "incorrect"
            tr(class='question ' + isCorrectClass)
              td.number= i + 1
              td.asktime= common.printDate(question.askTime)
              td.numbers
                span.lhs= question.number1
                span.rhs= question.number2
              td.answerGiven= question.answerGiven
              td.answerCorrect= question.answerCorrect
          //- last question
          - var question = questions[questions.length - 1]
          tr.question.last-question
            td.number= i + 1
            td.asktime= common.printDate(question.askTime)
            td.numbers
              span.lhs= question.number1
              span.rhs= question.number2
            
            block
      else
        div.quiz-noquestions No questions found